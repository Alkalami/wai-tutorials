<!doctype html>
<html class="no-js no-svg" lang="en">
<head>
  <meta charset="utf-8">
  <title>
  Fly-out Menus
  
    
       &bull; Navigation
    
  
  &bull; WAI Web Accessibility Tutorials
  </title>
  <link rel="canonical" href="http://www.w3.org/WAI/tutorials/site-navigation/menus-flyout/" />
  <meta name="viewport" content="width=device-width">
  <link href="../../stylesheets/wai-act-d9cb0378.css" rel="stylesheet" type="text/css" />
  <script src="../../javascripts/modernizr-a1c597b5.js" type="text/javascript"></script>
</head>
<body class="texts">
  <header role="banner">
    <div class="w3c-wai-header">
      <a href="http://w3.org/"><img alt="W3C" width="90" src="../../img/w3c-796023c4.png" /></a>
      <a href="http://w3.org/WAI/" class="wai"><img alt="Web Accessibility Initiative" src="../../img/wai-4c28be39.png" /></a>
    </div>
    <div class="page-title">
      <a class="" href="../../">Web Accessibility Tutorials <span class="subheading">Guidance on how to create websites that meet WCAG</span></a>
    </div>
  </header>
  <div class="with-side-menu">
    <nav aria-label="Skip links" role="navigation">
      <a href="#nav" class="btn btn-jump">Jump to the navigation</a>
    </nav>
<main role="main" class="content approved-draft">
  <article role="article">
    <header class="tutorial-heading">
      <nav class="breadcrumb" aria-label="Breadcrumbs" role="navigation">
        <p>
          <span class="home"><a class="" href="../../"><span class="count"></span><span class="txt">Tutorials home</span></a></span> <span class="icon icon-chevron-right"></span><span class="visuallyhidden">»</span>
          <span class="other">
            
              <a class="" href="../"><span class="count"></span><span class="txt">Navigation</span></a> <span class="icon icon-chevron-right"></span><span class="visuallyhidden">»</span>
            
            
            <span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Fly-out Menus</span></span>
          </span>
        </p>
      </nav>
      <h1>
        Fly-out Menus
      </h1>
    </header>

    
    


    <div class="inner">

      

      


      <p>Some websites use fly-out menus to allow users to access additional pages further down the page hierarchy. This removes the need for multiple page loads if the user knows where to find the specific content. It also allows for getting an overview of the content of the website.</p>

<h2 id="indicate-the-presence-of-a-submenu">Indicate the presence of a submenu</h2>

<p>Users need to be aware which menu items have a submenu and which don’t. In the following example, only the “SpaceBears” item has one. An arrow icon is shown to inform visual users about the submenu, but for other uses, like assistive technologies, the following ARIA attributes provide the information programatically:</p>

<ul>
  <li><code>aria-haspopup="true"</code> prompts assistive technologies to give the information that a submenu is present to the user</li>
  <li><code>aria-expanded</code> conveys the state of the submenu: It is initially set to “false” as the submenu is not visible.</li>
</ul>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="presentation" aria-label="Main Navigation" id="flyoutnav">
		<ul>
				<li><a href="#flyoutnav">Home</a></li>
				<li><a href="#flyoutnav">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnav" aria-haspopup="true" aria-expanded="false">SpaceBears</a>
						<ul>
								<li><a href="#flyoutnav">SpaceBear 6</a></li>
								<li><a href="#flyoutnav">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnav">MarsCars</a></li>
				<li><a href="#flyoutnav">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnav {
			display:table;
			width:100%;
	}
	#flyoutnav > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnav > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnav a,
	#flyoutnav .current {
			display: block;
			padding: .25em;
			border-bottom: .25em solid #E8E8E8;
	}
	#flyoutnav a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutnav a:hover,
	#flyoutnav a:focus {
			background-color: #fff;
			color: #036;
			border-color: #036;
			text-decoration: underline;
	}
	#flyoutnav .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnav > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnav > ul > li:hover > ul {
		display:block;
	}

	#flyoutnav > ul > li > ul a{
		border-bottom-width: 1px;
	}

	.has-submenu > a:after {
		margin-left: 5px;
		line-height: 14px;
		content: url(../../img/ex-dropdown-inactive-63feea50.png);
	}
	.has-submenu:hover > a:hover:after,
	.has-submenu > a:focus:after {
		content: url(../../img/ex-dropdown-active-364145a2.png);
	}
</style>


  </div></figure>

<figure class="code ">
  <figcaption>Code snippet: HTML</figcaption>
<pre class="highlight html"><code><span class="nt">&lt;nav</span> <span class="na">role=</span><span class="s">"presentation"</span> <span class="na">aria-label=</span><span class="s">"Main Navigation"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;ul&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Shop<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"has-submenu"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"…"</span> <span class="na">aria-haspopup=</span><span class="s">"true"</span> <span class="na">aria-expanded=</span><span class="s">"false"</span><span class="nt">&gt;</span>
							SpaceBears
						<span class="nt">&lt;/a&gt;</span>
						<span class="nt">&lt;ul&gt;</span>
								<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>SpaceBear 6<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
								<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>SpaceBear 6 Plus<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
						<span class="nt">&lt;/ul&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>MarsCars<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
		<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</code></pre>
</figure>
<h2 id="improving-the-menu">Improving the menu</h2>

<h3 id="mouse-users">Mouse users</h3>

<p>CSS can be used to show submenus when their parent menu is hovered. However, this method has the disadvantage that the menu immediately snaps back once the cursor leaves the hovered element.</p>

<figure class="code ">
  <figcaption>Code snippet: CSS</figcaption>
<pre class="highlight css"><code><span class="nt">nav</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">ul</span> <span class="p">{</span>
	<span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">nav</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="nt">li</span><span class="nd">:hover</span> <span class="nt">ul</span> <span class="p">{</span>
	<span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</figure>
<p>This behavior can be avoided by adding some scripting. When the cursor leaves the menu item, a timer is started which schedules to close the menu after one second. If the mouse re-enters the submenu during that time, that timer is canceled and the submenu stays open.</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="presentation" aria-label="Main Navigation" id="flyoutnavmousefixed">
		<ul>
				<li><a href="#flyoutnavmousefixed">Home</a></li>
				<li><a href="#flyoutnavmousefixed">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnavmousefixed" aria-haspopup="true" aria-expanded="false">SpaceBears</a>
						<ul>
								<li><a href="#flyoutnavmousefixed">SpaceBear 6</a></li>
								<li><a href="#flyoutnavmousefixed">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnavmousefixed">MarsCars</a></li>
				<li><a href="#flyoutnavmousefixed">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavmousefixed {
			display:table;
			width:100%;
	}
	#flyoutnavmousefixed > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavmousefixed > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavmousefixed a,
	#flyoutnavmousefixed .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavmousefixed a {
			color: #fff;
			text-decoration: none;
			border: 1px solid #036;
	}
	#flyoutnavmousefixed a:hover,
	#flyoutnavmousefixed a:focus {
			background-color: #fff;
			color: #036;
			text-decoration: underline;
	}
	#flyoutnavmousefixed .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavmousefixed > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavmousefixed > ul > li.open > ul {
		display:block;
	}

	#flyoutnavmousefixed > ul > li > ul a{
		border-bottom-width: 1px;
	}
</style>

<script>
var menuItems1 = document.querySelectorAll('#flyoutnavmousefixed li.has-submenu');
var timer1;

Array.prototype.forEach.call(menuItems1, function(el, i){
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavmousefixed .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
});
</script>


  </div></figure>

<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>
<pre class="highlight javascript"><code><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"mouseover"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu open"</span><span class="p">;</span>
		<span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
	<span class="p">});</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"mouseout"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
			<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">".has-submenu.open"</span><span class="p">).</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu"</span><span class="p">;</span>
		<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</figure>
<h3 id="keyboard-users">Keyboard users</h3>

<p>Usually submenus are not supposed to open when tabbing through the menu using the keyboard as a keyboard user would need to step through all submenu items to get to the next top-level item.</p>

<p>Different approaches address the need of keeping the top-level link accessible or not.</p>

<h4 class="ap" id="toggle-submenu-using-the-top-level-menu-item">Toggle submenu using the top-level menu item</h4>

<p>The submenu is opened by a script when the user activates the top-level menu item. The value of the <code>href</code> attribute is ignored.</p>

<p>When the focus leaves the submenu (for example by using the tab key on the last submenu item), the submenu is closed.</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="presentation" aria-label="Main Navigation" id="flyoutnavkbfixed">
		<ul>
				<li><a href="#flyoutnavkbfixed">Home</a></li>
				<li><a href="#flyoutnavkbfixed">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnavkbfixed">SpaceBears</a>
						<ul>
								<li><a href="#flyoutnavkbfixed">SpaceBear 6</a></li>
								<li><a href="#flyoutnavkbfixed">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnavkbfixed">MarsCars</a></li>
				<li><a href="#flyoutnavkbfixed">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavkbfixed {
			display:table;
			width:100%;
	}
	#flyoutnavkbfixed > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavkbfixed > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavkbfixed a,
	#flyoutnavkbfixed .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavkbfixed a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutnavkbfixed a:hover,
		#flyoutnavkbfixed a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutnavkbfixed .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavkbfixed > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavkbfixed > ul > li.open > ul {
		display:block;
	}

	#flyoutnavkbfixed > ul > li > ul a{
		border-bottom-width: 1px;
	}
</style>

<script>
/* focusin/out event polyfill (firefox) */
!function(){
	var w = window,
	d = w.document;

	if( w.onfocusin === undefined ){
		d.addEventListener('focus' ,addPolyfill ,true);
		d.addEventListener('blur' ,addPolyfill ,true);
		d.addEventListener('focusin' ,removePolyfill ,true);
		d.addEventListener('focusout' ,removePolyfill ,true);
	}
	function addPolyfill(e){
		var type = e.type === 'focus' ? 'focusin' : 'focusout';
		var event = new CustomEvent(type, { bubbles:true, cancelable:false });
		event.c1Generated = true;
		e.target.dispatchEvent( event );
	}
	function removePolyfill(e){
if(!e.c1Generated){ // focus after focusin, so chrome will the first time trigger tow times focusin
	d.removeEventListener('focus' ,addPolyfill ,true);
	d.removeEventListener('blur' ,addPolyfill ,true);
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
}
setTimeout(function(){
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
});
}
}();

function hasClass(el, className) {
	if (el.classList) {
		return el.classList.contains(className);
	} else {
		return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
	}
}

var menuItems1 = document.querySelectorAll('#flyoutnavkbfixed li.has-submenu');
var timer1, timer2;

Array.prototype.forEach.call(menuItems1, function(el, i){
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavkbfixed .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
		el.querySelector('a').addEventListener("click",  function(event){
			if (this.parentNode.className == "has-submenu") {
				this.parentNode.className = "has-submenu open";
				this.setAttribute('aria-expanded', "true");
			} else {
				this.parentNode.className = "has-submenu";
				this.setAttribute('aria-expanded', "false");
			}
			event.preventDefault();
		});
		var links = el.querySelectorAll('a');
		Array.prototype.forEach.call(links, function(el, i){
			el.addEventListener("focus", function() {
				if (timer2) {
					clearTimeout(timer2);
					timer2 = null;
				}
			});
			el.addEventListener("blur", function(event) {
				timer2 = setTimeout(function () {
					var opennav = document.querySelector("#flyoutnavkbfixed .has-submenu.open")
					if (opennav) {
						opennav.className = "has-submenu";
					}
				}, 10);
			});
		});
});
</script>


  </div></figure>

<p>The following code iterates through all top-level items with the class <code>has-submenu</code> and adds a click event to it which opens or closes the submenu, depending on its state. In addition, the <code>aria-expanded</code> attribute is set to <code>true</code> while the submenu is shown and otherwise to <code>false</code>.</p>

<div class="notes ">
<p><strong>Note:</strong> Despite the name, click events are activated regardless of the input method as soon as the link gets activated.</p>

</div>
<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">menuItems</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'li.has-submenu'</span><span class="p">);</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'a'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">==</span> <span class="s2">"has-submenu"</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu open"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">,</span> <span class="s2">"true"</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">,</span> <span class="s2">"false"</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</figure>
<h4 class="ap" id="toggle-submenu-using-a-special-show-submenu-button">Toggle submenu using a special “show submenu” button</h4>

<p>If the top-level menu item needs to stay a proper link that links to a page, a separate button can be added to the top-level item that opens/closes the menu. This button can also act as a visual indicator for the presence of a submenu.</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="presentation" aria-label="Main Navigation" id="flyoutnavkbbtn">
	<ul>
		<li><a href="#flyoutnavkbbtn">Home</a></li>
		<li><a href="#flyoutnavkbbtn">Shop</a></li>
		<li class="has-submenu">
			<a href="#flyoutnavkbbtn">SpaceBears</a>
			<ul>
				<li><a href="#flyoutnavkbbtn">SpaceBear 6</a></li>
				<li><a href="#flyoutnavkbbtn">SpaceBear 6 Plus</a></li>
			</ul>
		</li>
		<li><a href="#flyoutnavkbbtn">MarsCars</a></li>
		<li><a href="#flyoutnavkbbtn">Contact</a></li>
	</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavkbbtn {
			display:table;
			width:100%;
	}
	#flyoutnavkbbtn > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavkbbtn > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavkbbtn a,
	#flyoutnavkbbtn .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavkbbtn a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutnavkbbtn a:hover,
		#flyoutnavkbbtn a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutnavkbbtn .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavkbbtn > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavkbbtn > ul > li.open > ul {
		display:block;
	}

	#flyoutnavkbbtn > ul > li > ul a{
		border-bottom-width: 1px;
	}


	#flyoutnavkbbtn .has-submenu > a:after {
		margin-left: 5px;
		line-height: 14px;
		content: '';
	}
	#flyoutnavkbbtn .has-submenu:hover > a:hover:after,
	#flyoutnavkbbtn .has-submenu > a:focus:after {
		content: '';
	}

	#flyoutnavkbbtn .has-submenu button {
		background-color: transparent;
		border: none;
		padding:0;
		line-height: 1;
		padding: 3px;
	}

	 #flyoutnavkbbtn .has-submenu button > span {
		display:inline-block;
		width: .8em;
		height: .8em;
		background: url(../../img/ex-dropdown-inactive-63feea50.png) center no-repeat;
	}

	#flyoutnavkbbtn .has-submenu button:hover > span,
	#flyoutnavkbbtn .has-submenu button:focus > span {
		background: url(../../img/ex-dropdown-active-364145a2.png) #fff;
	}

	#flyoutnavkbbtn .has-submenu:hover  button,
	#flyoutnavkbbtn .has-submenu a:focus button {
		background-color: #036;
	}
	#flyoutnavkbbtn .has-submenu button:focus {
		background: #FFF;
	}
</style>

<script>
/* focusin/out event polyfill (firefox) */
!function(){
	var w = window,
	d = w.document;

	if( w.onfocusin === undefined ){
		d.addEventListener('focus' ,addPolyfill ,true);
		d.addEventListener('blur' ,addPolyfill ,true);
		d.addEventListener('focusin' ,removePolyfill ,true);
		d.addEventListener('focusout' ,removePolyfill ,true);
	}
	function addPolyfill(e){
		var type = e.type === 'focus' ? 'focusin' : 'focusout';
		var event = new CustomEvent(type, { bubbles:true, cancelable:false });
		event.c1Generated = true;
		e.target.dispatchEvent( event );
	}
	function removePolyfill(e){
if(!e.c1Generated){ // focus after focusin, so chrome will the first time trigger tow times focusin
	d.removeEventListener('focus' ,addPolyfill ,true);
	d.removeEventListener('blur' ,addPolyfill ,true);
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
}
setTimeout(function(){
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
});
}
}();

function hasClass(el, className) {
	if (el.classList) {
		return el.classList.contains(className);
	} else {
		return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
	}
}

var menuItems1 = document.querySelectorAll('#flyoutnavkbbtn li.has-submenu');
var timer1, timer2;

var parseHTML = function(str) {
	var tmp = document.implementation.createHTMLDocument();
	tmp.body.innerHTML = str;
	return tmp.body.children;
};

Array.prototype.forEach.call(menuItems1, function(el, i){
		var btn = '<button><span><span class="visuallyhidden">show submenu</span></span></button>';
		var activatingA = el.querySelector('a')
		activatingA.innerHTML = activatingA.innerHTML + ' ' + btn;
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavkbbtn .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
		el.querySelector('a button').addEventListener("click",  function(event){
			if (this.parentNode.parentNode.className == "has-submenu") {
				this.parentNode.parentNode.className = "has-submenu open";
				this.parentNode.setAttribute('aria-expanded', "true");
			} else {
				this.parentNode.parentNode.className = "has-submenu";
				this.parentNode.setAttribute('aria-expanded', "false");
			}
			event.preventDefault();
		});
		var links = el.querySelectorAll('a');
		Array.prototype.forEach.call(links, function(el, i){
			el.addEventListener("focus", function() {
				if (timer2) {
					clearTimeout(timer2);
					timer2 = null;
				}
			});
			el.addEventListener("blur", function(event) {
				timer2 = setTimeout(function () {
					var opennav = document.querySelector("#flyoutnavkbbtn .has-submenu.open")
					if (opennav) {
						opennav.className = "has-submenu";
					}
				}, 10);
			});
		});
});
</script>


  </div></figure>

<p>In the following code example, a button is added to every top-level menu item link with a submenu. When the button is activated, it shows or hides the submenu. The invisible label of the button is set to “show submenu” or “hide submenu”, reflecting the state of the submenu.</p>

<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">menuItems</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'li.has-submenu'</span><span class="p">);</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">btn</span> <span class="o">=</span> <span class="s1">'&lt;button&gt;&lt;span&gt;&lt;span class="visuallyhidden"&gt;show submenu&lt;/span&gt;&lt;/span&gt;&lt;/button&gt;'</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">topLevelLink</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'a'</span><span class="p">);</span>
	<span class="nx">topLevelLink</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">topLevelLink</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">btn</span><span class="p">;</span>

	<span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'a button'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">==</span> <span class="s2">"has-submenu"</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu open"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">,</span> <span class="s2">"true"</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.visuallyhidden'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="s1">'hide submenu'</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">,</span> <span class="s2">"false"</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.visuallyhidden'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="s1">'show submenu'</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</figure>


      <div class="resources">
  <h2 id="related">Related WCAG 2.0 resources</h2>
  <div class="resources-inner">
	  <p>The following WCAG 2.0 resources are directly related to this page. <a href="../../#relationship-to-wcag-20">Relationship to WCAG 2.0</a> provides more background information.</p>
	  
	  
	    <p><strong>Techniques:</strong></p>
	    <ul>
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	            <li><a href="http://www.w3.org/TR/WCAG20-TECHS/H4">H4: Creating a logical tab order through links, form controls, and objects</a></li>
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	            <li><a href="http://www.w3.org/TR/WCAG20-TECHS/SCR26">SCR26: Inserting dynamic content into the Document Object Model immediately following its trigger element</a></li>
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	    </ul>
	  
  </div>
</div>


      <div role="navigation" id="tools">
  <ul>
    
      
      
        
        
        
      
        
        
          <li class="prev">
            <span><a rel="prev" class="" href="../menus-styling/"><span class="count"></span><span class="txt"><span class="dir">Previous:</span><span class="title">Menu Styling</span></span></a></span>
          </li>
        
        
      
        
        
        
      
        
        
        
          <li class="next">
            <span><a rel="next" class="" href="../in-page-navigation/"><span class="count"></span><span class="txt"><span class="dir">Next:</span><span class="title">In-page Navigation</span></span></a></span>
          </li>
        
      
        
        
        
      
        
        
        
      
    
  </ul>
</div>


      <aside class="side-box github" role="complementary">
  <h2 class="heading">We welcome your ideas</h2>
  <p>Please send any ideas, suggestions, or comments to the <a href="mailto:wai-eo-editors@w3.org?subject=[Tutorial%20Feedback]">(publicly-archived) mailing list wai-eo-editors@w3.org</a>. You can also contribute to the <a href="https://github.com/w3c/wai-tutorials" rel="nofollow">code directly on Github</a>.</p>

	<div class="editpage">
  	<a class="btn" href="https://github.com/w3c/wai-tutorials/blob/master/source/site-navigation/menus-flyout.html.erb.md">Fork &amp; edit this page on Github</a>
	</div>

</aside>


    </div>
  </article>
</main>
<div class="navigation">
  <nav role="navigation" aria-label="Navigation" id="nav">
    <h2 class="list-heading" id="list-heading-tutorials">
      
        
           Tutorial
        
      
    </h2>
    <ul aria-labelledby="list-heading-tutorials">
      
        
      
      
        
          <li class="intro"><a class="" href="../"><span class="count"></span><span class="txt">Concepts</span></a></li>
        
        
          
            <li>
              <a class="" href="../menus-structure/"><span class="count"></span><span class="txt">Menu Structure</span></a>
              
            </li>
          
        
          
            <li>
              <a class="" href="../menus-styling/"><span class="count"></span><span class="txt">Menu Styling</span></a>
              
            </li>
          
        
          
            <li>
              <span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Fly-out Menus</span></span>
              
            </li>
          
        
          
            <li>
              <a class="" href="../in-page-navigation/"><span class="count"></span><span class="txt">In-page Navigation</span></a>
              
            </li>
          
        
          
            <li>
              <a class="" href="../multiple-ways/"><span class="count"></span><span class="txt">Multiple Ways</span></a>
              
            </li>
          
        
          
            <li class="tips">
              <a class="" href="../application-menus/"><span class="count"></span><span class="txt">Applications Menu</span></a>
              
            </li>
          
        
      
    </ul>
    <h2 class="list-heading" id="list-heading-topics">
  All Tutorials
</h2>
<ul class="topics" aria-labelledby="list-heading-topics">
	<li><a href="../../page-structure/"><span class="count"></span><span class="txt">Page Structure <span class="status">draft</span></span></a></li>
	<li><a href="../../images/"><span class="count"></span><span class="txt">Images</span></a></li>
	<li><a href="../../tables/"><span class="count"></span><span class="txt">Tables</span></a></li>
	<li><a href="../../forms/"><span class="count"></span><span class="txt">Forms</span></a></li>
	<li><a href="../../carousels/"><span class="count"></span><span class="txt">Carousels <span class="status">draft</span></span></a></li>
  <li><span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Site Navigation <span class="status">editors-draft</span></span></span></li>
  <li><a href="../../design/"><span class="count"></span><span class="txt">Design <span class="status">editors-draft</span></span></a></li>
</ul>

  </nav>
</div>
  </div>
	<footer id="footer" role="contentinfo" aria-labelledby="wai_footerheading">
    <div>
		<h2 id="wai_footerheading">Document Information</h2>
    <p><strong>Feedback: We welcome ideas for improvements, bug reports, and comments</strong> via <a href="https://github.com/w3c/wai-tutorials">GitHub</a> or e-mail to <a href="mailto:wai-eo-editors@w3.org">wai-eo-editors@w3.org</a> (a publicly archived list) or <a href="mailto:wai@w3.org">wai@w3.org</a> (a WAI staff-only list).</p>
		<ul>
			<li><strong>Status:</strong>
				
	        Draft, approved by <a href="http://www.w3.org/WAI/EO/">EOWG</a>, updated
	      
	      21 December 2016
	      
			</li>
      <li>
Editors:
<ul class="inline">
    <li><a href="http://w3.org/People/yatil/">Eric Eggert</a></li><li><a href="http://w3.org/People/shadi/">Shadi Abou-Zahra</a></li>
  </ul>

Contributors: The Education and Outreach Working Group (<a href="http://www.w3.org/WAI/EO/">EOWG</a>).
</li>

<li>
</li>

      <li>[<a class="" href="../../attributions/"><span class="count"></span><span class="txt">Attributions</span></a>]  [<a class="" href="../../changelog/"><span class="count"></span><span class="txt">Changelog</span></a>]</li>
    </ul>
    <p>
    	[<a href="http://www.w3.org/WAI/sitemap.html">WAI Site Map</a>]
    	[<a href="http://www.w3.org/WAI/sitehelp.html">Help with WAI Website</a>]
    	[<a href="http://www.w3.org/WAI/search.php">Search</a>]
    	[<a href="http://www.w3.org/WAI/contacts">Contacting WAI</a>]
		</p>
    <div class="copyright">
        <p>
	        Copyright &#xA9; 2014 W3C <sup>&#xAE;</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>) <a href="/Consortium/Legal/ipr-notice">Usage policies apply</a>.
        </p>
      </div><!-- ends copyright -->
    </div>
	</footer>
	<script src="../../javascripts/main-fce55f74.js" type="text/javascript"></script>
	</body>
</html>
